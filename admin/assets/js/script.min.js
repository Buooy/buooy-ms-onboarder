"use strict";function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),BMSGSW_script=function(){function a(){_classCallCheck(this,a);var e=this,t=jQuery.noConflict();this.remodal=t("[data-remodal-id=modal]").remodal({closeOnAnyClick:!1,closeOnOutsideClick:!1,closeOnEscape:!1}),this.slick=t(".slick"),t(document).ready(function(){e.remodal.open(),e.slick.slick(),e.init_info(),e.init_actions(),e.init_events()})}return _createClass(a,[{key:"init_info",value:function(){var a=jQuery.noConflict();BMSO.gmt>=0&&(BMSO.gmt="+"+BMSO.gmt),a(".remodal #timezone_string").val("UTC"+BMSO.gmt),a('.remodal input[name="date_format"][value="'+BMSO.date_format+'"]').prop("checked",!0),a('.remodal input[name="time_format"][value="'+BMSO.time_format+'"]').prop("checked",!0),a('.remodal input[name="permalink_structure"][value="'+BMSO.permalink_structure+'"]').prop("checked",!0)}},{key:"init_actions",value:function(){var a=this,e=jQuery.noConflict();e("[data-remodal-action=cancel]").click(function(){a.onboarding_completed()}),e("[data-remodal-action=next]").click(function(){"update"!=e(this).data("action")&&a.slick.slick("slickNext")}),e("[data-remodal-action=back]").click(function(){a.slick.slick("slickPrev")}),e(".remodal").on("click","[data-remodal-action=next][data-action=update]",function(){a.update_info()}),e(".remodal").on("click","[data-remodal-action=next][data-action=close]",function(){a.onboarding_completed(),a.remodal.close()})}},{key:"init_events",value:function(){var a=jQuery.noConflict();this.slick.on("beforeChange",function(e,t,n,o){0==o?a("[data-remodal-action=back]").addClass("hidden"):a("[data-remodal-action=back]").removeClass("hidden")}),this.slick.on("afterChange",function(e,t,n,o){3==n?a("[data-remodal-action=next]").attr("data-action","update"):a("[data-remodal-action=next]").removeAttr("data-action"),n==t.slideCount-1&&(console.log("asdad"),a("[data-remodal-action=next]").attr("data-action","close"))})}},{key:"update_info",value:function(){var a=jQuery.noConflict(),e=this;a("[data-remodal-action=back]").addClass("hidden"),a("[data-remodal-action=next]").attr("disabled",!0),a("[data-remodal-action=next] .loading-img").removeClass("hidden"),a("[data-remodal-action=next] .loading-text").addClass("hidden");var t={action:"BMSO_update_info",nonce:BMSO.nonce,admin_email:a(".remodal [name=admin_email]").val(),blogname:a(".remodal [name=blogname]").val(),blogdescription:a(".remodal [name=blogdescription]").val(),timezone_string:a(".remodal [name=timezone_string]").val(),date_format:a(".remodal [name=date_format]:checked").val(),time_format:a(".remodal [name=time_format]:checked").val(),permalink_structure:a(".remodal [name=permalink_structure]:checked").val()};a.post(ajaxurl,t,function(t){t.success?(e.slick.slick("slickNext"),a("#remodal-msg").html("")):a("#remodal-msg").html('<p class="error">'+t.data.msg+"</p>"),a("[data-remodal-action=next]").attr("disabled",!1),a("[data-remodal-action=next] .loading-img").addClass("hidden"),a("[data-remodal-action=next] .loading-text").removeClass("hidden"),a("[data-remodal-action=back]").removeClass("hidden")},"json")}},{key:"onboarding_completed",value:function(){var a=jQuery.noConflict(),e={action:"BMSO_onboarding_completed",nonce:BMSO.nonce};a.post(ajaxurl,e,function(a){console.log(a)})}}]),a}();new BMSGSW_script;